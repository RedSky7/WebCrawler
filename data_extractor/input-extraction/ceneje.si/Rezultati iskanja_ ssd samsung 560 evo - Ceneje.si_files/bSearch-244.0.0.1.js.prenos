/*! URI.js v1.11.2 http://medialize.github.com/URI.js/ */
(function(b,a){"object"===typeof exports?module.exports=a():"function"===typeof define&&define.amd?define(a):b.IPv6=a(b);})(this,function(b){var a=b&&b.IPv6;return{best:function(k){k=k.toLowerCase().split(":");var l=k.length,c=8;""===k[0]&&""===k[1]&&""===k[2]?(k.shift(),k.shift()):""===k[0]&&""===k[1]?k.shift():""===k[l-1]&&""===k[l-2]&&k.pop();l=k.length;-1!==k[l-1].indexOf(".")&&(c=7);var i;for(i=0;i<l&&""!==k[i];i++){}if(i<c){for(k.splice(i,1,"0000");k.length<c;){k.splice(i,0,"0000");}}for(i=0;i<c;i++){for(var l=k[i].split(""),d=0;3>d;d++){if("0"===l[0]&&1<l.length){l.splice(0,1);}else{break;}}k[i]=l.join("");}var l=-1,m=d=0,e=-1,j=!1;for(i=0;i<c;i++){j?"0"===k[i]?m+=1:(j=!1,m>d&&(l=e,d=m)):"0"==k[i]&&(j=!0,e=i,m=1);}m>d&&(l=e,d=m);1<d&&k.splice(l,d,"");l=k.length;c="";""===k[0]&&(beststr=":");for(i=0;i<l;i++){c+=k[i];if(i===l-1){break;}c+=":";}""===k[l-1]&&(c+=":");return c;},noConflict:function(){b.IPv6===this&&(b.IPv6=a);return this;}};});(function(aa){function Y(b){throw RangeError(ac[b]);}function Z(b,f){for(var e=b.length;e--;){b[e]=f(b[e]);}return b;}function U(h){for(var n=[],l=0,g=h.length,f,k;l<g;){f=h.charCodeAt(l++),55296<=f&&56319>=f&&l<g?(k=h.charCodeAt(l++),56320==(k&64512)?n.push(((f&1023)<<10)+(k&1023)+65536):(n.push(f),l--)):n.push(f);}return n;}function ae(b){return Z(b,function(d){var e="";65535<d&&(d-=65536,e+=S(d>>>10&1023|55296),d=56320|d&1023);return e+=S(d);}).join("");}function i(f,h,g){var e=0;f=g?Q(f/j):f>>1;for(f+=Q(f/h);f>V*W>>1;e+=ab){f=Q(f/V);}return Q(e+(V+1)*f/(f+o));}function L(x){var w=[],v=x.length,l,n=0,t=M,z=H,q,h,b,y,e;q=x.lastIndexOf(K);0>q&&(q=0);for(h=0;h<q;++h){128<=x.charCodeAt(h)&&Y("not-basic"),w.push(x.charCodeAt(h));}for(q=0<q?q+1:0;q<v;){h=n;l=1;for(b=ab;;b+=ab){q>=v&&Y("invalid-input");y=x.charCodeAt(q++);y=10>y-48?y-22:26>y-65?y-65:26>y-97?y-97:ab;(y>=ab||y>Q((G-n)/l))&&Y("overflow");n+=y*l;e=b<=z?R:b>=z+W?W:b-z;if(y<e){break;}y=ab-e;l>Q(G/y)&&Y("overflow");l*=y;}l=w.length+1;z=i(n-h,l,0==h);Q(n/l)>G-t&&Y("overflow");t+=Q(n/l);n%=l;w.splice(n++,0,t);}return ae(w);}function T(B){var y,w,z,n,q,v,t,E,e,D=[],l,h,A;B=U(B);l=B.length;y=M;w=0;q=H;for(v=0;v<l;++v){e=B[v],128>e&&D.push(S(e));}for((z=n=D.length)&&D.push(K);z<l;){t=G;for(v=0;v<l;++v){e=B[v],e>=y&&e<t&&(t=e);}h=z+1;t-y>Q((G-w)/h)&&Y("overflow");w+=(t-y)*h;y=t;for(v=0;v<l;++v){if(e=B[v],e<y&&++w>G&&Y("overflow"),e==y){E=w;for(t=ab;;t+=ab){e=t<=q?R:t>=q+W?W:t-q;if(E<e){break;}A=E-e;E=ab-e;D.push(S(e+A%E+22+75*(26>e+A%E)-0));E=Q(A/E);}D.push(S(E+22+75*(26>E)-0));q=i(w,h,z==n);w=0;++z;}}++w;++y;}return D.join("");}var N="object"==typeof exports&&exports,P="object"==typeof module&&module&&module.exports==N&&module,J="object"==typeof global&&global;if(J.global===J||J.window===J){aa=J;}var X,G=2147483647,ab=36,R=1,W=26,o=38,j=700,H=72,M=128,K="-",I=/^xn--/,af=/[^ -~]/,ad=/\x2E|\u3002|\uFF0E|\uFF61/g,ac={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},V=ab-R,Q=Math.floor,S=String.fromCharCode,O;X={version:"1.2.3",ucs2:{decode:U,encode:ae},decode:L,encode:T,toASCII:function(a){return Z(a.split(ad),function(b){return af.test(b)?"xn--"+T(b):b;}).join(".");},toUnicode:function(b){return Z(b.split(ad),function(c){return I.test(c)?L(c.slice(4).toLowerCase()):c;}).join(".");}};if("function"==typeof define&&"object"==typeof define.amd&&define.amd){define(function(){return X;});}else{if(N&&!N.nodeType){if(P){P.exports=X;}else{for(O in X){X.hasOwnProperty(O)&&(N[O]=X[O]);}}}else{aa.punycode=X;}}})(this);(function(b,a){"object"===typeof exports?module.exports=a():"function"===typeof define&&define.amd?define(a):b.SecondLevelDomains=a(b);})(this,function(c){var a=c&&c.SecondLevelDomains,b=Object.prototype.hasOwnProperty,d={list:{ac:"com|gov|mil|net|org",ae:"ac|co|gov|mil|name|net|org|pro|sch",af:"com|edu|gov|net|org",al:"com|edu|gov|mil|net|org",ao:"co|ed|gv|it|og|pb",ar:"com|edu|gob|gov|int|mil|net|org|tur",at:"ac|co|gv|or",au:"asn|com|csiro|edu|gov|id|net|org",ba:"co|com|edu|gov|mil|net|org|rs|unbi|unmo|unsa|untz|unze",bb:"biz|co|com|edu|gov|info|net|org|store|tv",bh:"biz|cc|com|edu|gov|info|net|org",bn:"com|edu|gov|net|org",bo:"com|edu|gob|gov|int|mil|net|org|tv",br:"adm|adv|agr|am|arq|art|ato|b|bio|blog|bmd|cim|cng|cnt|com|coop|ecn|edu|eng|esp|etc|eti|far|flog|fm|fnd|fot|fst|g12|ggf|gov|imb|ind|inf|jor|jus|lel|mat|med|mil|mus|net|nom|not|ntr|odo|org|ppg|pro|psc|psi|qsl|rec|slg|srv|tmp|trd|tur|tv|vet|vlog|wiki|zlg",bs:"com|edu|gov|net|org",bz:"du|et|om|ov|rg",ca:"ab|bc|mb|nb|nf|nl|ns|nt|nu|on|pe|qc|sk|yk",ck:"biz|co|edu|gen|gov|info|net|org",cn:"ac|ah|bj|com|cq|edu|fj|gd|gov|gs|gx|gz|ha|hb|he|hi|hl|hn|jl|js|jx|ln|mil|net|nm|nx|org|qh|sc|sd|sh|sn|sx|tj|tw|xj|xz|yn|zj",co:"com|edu|gov|mil|net|nom|org",cr:"ac|c|co|ed|fi|go|or|sa",cy:"ac|biz|com|ekloges|gov|ltd|name|net|org|parliament|press|pro|tm","do":"art|com|edu|gob|gov|mil|net|org|sld|web",dz:"art|asso|com|edu|gov|net|org|pol",ec:"com|edu|fin|gov|info|med|mil|net|org|pro",eg:"com|edu|eun|gov|mil|name|net|org|sci",er:"com|edu|gov|ind|mil|net|org|rochest|w",es:"com|edu|gob|nom|org",et:"biz|com|edu|gov|info|name|net|org",fj:"ac|biz|com|info|mil|name|net|org|pro",fk:"ac|co|gov|net|nom|org",fr:"asso|com|f|gouv|nom|prd|presse|tm",gg:"co|net|org",gh:"com|edu|gov|mil|org",gn:"ac|com|gov|net|org",gr:"com|edu|gov|mil|net|org",gt:"com|edu|gob|ind|mil|net|org",gu:"com|edu|gov|net|org",hk:"com|edu|gov|idv|net|org",id:"ac|co|go|mil|net|or|sch|web",il:"ac|co|gov|idf|k12|muni|net|org","in":"ac|co|edu|ernet|firm|gen|gov|i|ind|mil|net|nic|org|res",iq:"com|edu|gov|i|mil|net|org",ir:"ac|co|dnssec|gov|i|id|net|org|sch",it:"edu|gov",je:"co|net|org",jo:"com|edu|gov|mil|name|net|org|sch",jp:"ac|ad|co|ed|go|gr|lg|ne|or",ke:"ac|co|go|info|me|mobi|ne|or|sc",kh:"com|edu|gov|mil|net|org|per",ki:"biz|com|de|edu|gov|info|mob|net|org|tel",km:"asso|com|coop|edu|gouv|k|medecin|mil|nom|notaires|pharmaciens|presse|tm|veterinaire",kn:"edu|gov|net|org",kr:"ac|busan|chungbuk|chungnam|co|daegu|daejeon|es|gangwon|go|gwangju|gyeongbuk|gyeonggi|gyeongnam|hs|incheon|jeju|jeonbuk|jeonnam|k|kg|mil|ms|ne|or|pe|re|sc|seoul|ulsan",kw:"com|edu|gov|net|org",ky:"com|edu|gov|net|org",kz:"com|edu|gov|mil|net|org",lb:"com|edu|gov|net|org",lk:"assn|com|edu|gov|grp|hotel|int|ltd|net|ngo|org|sch|soc|web",lr:"com|edu|gov|net|org",lv:"asn|com|conf|edu|gov|id|mil|net|org",ly:"com|edu|gov|id|med|net|org|plc|sch",ma:"ac|co|gov|m|net|org|press",mc:"asso|tm",me:"ac|co|edu|gov|its|net|org|priv",mg:"com|edu|gov|mil|nom|org|prd|tm",mk:"com|edu|gov|inf|name|net|org|pro",ml:"com|edu|gov|net|org|presse",mn:"edu|gov|org",mo:"com|edu|gov|net|org",mt:"com|edu|gov|net|org",mv:"aero|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro",mw:"ac|co|com|coop|edu|gov|int|museum|net|org",mx:"com|edu|gob|net|org",my:"com|edu|gov|mil|name|net|org|sch",nf:"arts|com|firm|info|net|other|per|rec|store|web",ng:"biz|com|edu|gov|mil|mobi|name|net|org|sch",ni:"ac|co|com|edu|gob|mil|net|nom|org",np:"com|edu|gov|mil|net|org",nr:"biz|com|edu|gov|info|net|org",om:"ac|biz|co|com|edu|gov|med|mil|museum|net|org|pro|sch",pe:"com|edu|gob|mil|net|nom|org|sld",ph:"com|edu|gov|i|mil|net|ngo|org",pk:"biz|com|edu|fam|gob|gok|gon|gop|gos|gov|net|org|web",pl:"art|bialystok|biz|com|edu|gda|gdansk|gorzow|gov|info|katowice|krakow|lodz|lublin|mil|net|ngo|olsztyn|org|poznan|pwr|radom|slupsk|szczecin|torun|warszawa|waw|wroc|wroclaw|zgora",pr:"ac|biz|com|edu|est|gov|info|isla|name|net|org|pro|prof",ps:"com|edu|gov|net|org|plo|sec",pw:"belau|co|ed|go|ne|or",ro:"arts|com|firm|info|nom|nt|org|rec|store|tm|www",rs:"ac|co|edu|gov|in|org",sb:"com|edu|gov|net|org",sc:"com|edu|gov|net|org",sh:"co|com|edu|gov|net|nom|org",sl:"com|edu|gov|net|org",st:"co|com|consulado|edu|embaixada|gov|mil|net|org|principe|saotome|store",sv:"com|edu|gob|org|red",sz:"ac|co|org",tr:"av|bbs|bel|biz|com|dr|edu|gen|gov|info|k12|name|net|org|pol|tel|tsk|tv|web",tt:"aero|biz|cat|co|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel",tw:"club|com|ebiz|edu|game|gov|idv|mil|net|org",mu:"ac|co|com|gov|net|or|org",mz:"ac|co|edu|gov|org",na:"co|com",nz:"ac|co|cri|geek|gen|govt|health|iwi|maori|mil|net|org|parliament|school",pa:"abo|ac|com|edu|gob|ing|med|net|nom|org|sld",pt:"com|edu|gov|int|net|nome|org|publ",py:"com|edu|gov|mil|net|org",qa:"com|edu|gov|mil|net|org",re:"asso|com|nom",ru:"ac|adygeya|altai|amur|arkhangelsk|astrakhan|bashkiria|belgorod|bir|bryansk|buryatia|cbg|chel|chelyabinsk|chita|chukotka|chuvashia|com|dagestan|e-burg|edu|gov|grozny|int|irkutsk|ivanovo|izhevsk|jar|joshkar-ola|kalmykia|kaluga|kamchatka|karelia|kazan|kchr|kemerovo|khabarovsk|khakassia|khv|kirov|koenig|komi|kostroma|kranoyarsk|kuban|kurgan|kursk|lipetsk|magadan|mari|mari-el|marine|mil|mordovia|mosreg|msk|murmansk|nalchik|net|nnov|nov|novosibirsk|nsk|omsk|orenburg|org|oryol|penza|perm|pp|pskov|ptz|rnd|ryazan|sakhalin|samara|saratov|simbirsk|smolensk|spb|stavropol|stv|surgut|tambov|tatarstan|tom|tomsk|tsaritsyn|tsk|tula|tuva|tver|tyumen|udm|udmurtia|ulan-ude|vladikavkaz|vladimir|vladivostok|volgograd|vologda|voronezh|vrn|vyatka|yakutia|yamal|yekaterinburg|yuzhno-sakhalinsk",rw:"ac|co|com|edu|gouv|gov|int|mil|net",sa:"com|edu|gov|med|net|org|pub|sch",sd:"com|edu|gov|info|med|net|org|tv",se:"a|ac|b|bd|c|d|e|f|g|h|i|k|l|m|n|o|org|p|parti|pp|press|r|s|t|tm|u|w|x|y|z",sg:"com|edu|gov|idn|net|org|per",sn:"art|com|edu|gouv|org|perso|univ",sy:"com|edu|gov|mil|net|news|org",th:"ac|co|go|in|mi|net|or",tj:"ac|biz|co|com|edu|go|gov|info|int|mil|name|net|nic|org|test|web",tn:"agrinet|com|defense|edunet|ens|fin|gov|ind|info|intl|mincom|nat|net|org|perso|rnrt|rns|rnu|tourism",tz:"ac|co|go|ne|or",ua:"biz|cherkassy|chernigov|chernovtsy|ck|cn|co|com|crimea|cv|dn|dnepropetrovsk|donetsk|dp|edu|gov|if|in|ivano-frankivsk|kh|kharkov|kherson|khmelnitskiy|kiev|kirovograd|km|kr|ks|kv|lg|lugansk|lutsk|lviv|me|mk|net|nikolaev|od|odessa|org|pl|poltava|pp|rovno|rv|sebastopol|sumy|te|ternopil|uzhgorod|vinnica|vn|zaporizhzhe|zhitomir|zp|zt",ug:"ac|co|go|ne|or|org|sc",uk:"ac|bl|british-library|co|cym|gov|govt|icnet|jet|lea|ltd|me|mil|mod|national-library-scotland|nel|net|nhs|nic|nls|org|orgn|parliament|plc|police|sch|scot|soc",us:"dni|fed|isa|kids|nsn",uy:"com|edu|gub|mil|net|org",ve:"co|com|edu|gob|info|mil|net|org|web",vi:"co|com|k12|net|org",vn:"ac|biz|com|edu|gov|health|info|int|name|net|org|pro",ye:"co|com|gov|ltd|me|net|org|plc",yu:"ac|co|edu|gov|org",za:"ac|agric|alt|bourse|city|co|cybernet|db|edu|gov|grondar|iaccess|imt|inca|landesign|law|mil|net|ngo|nis|nom|olivetti|org|pix|school|tm|web",zm:"ac|co|com|edu|gov|net|org|sch"},has_expression:null,is_expression:null,has:function(e){return !!e.match(d.has_expression);},is:function(e){return !!e.match(d.is_expression);},get:function(e){return(e=e.match(d.has_expression))&&e[1]||null;},noConflict:function(){c.SecondLevelDomains===this&&(c.SecondLevelDomains=a);return this;},init:function(){var e="",g;for(g in d.list){b.call(d.list,g)&&(e+="|("+("("+d.list[g]+")."+g)+")");}d.has_expression=RegExp("\\.("+e.substr(1)+")$","i");d.is_expression=RegExp("^("+e.substr(1)+")$","i");}};d.init();return d;});(function(b,a){"object"===typeof exports?module.exports=a(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"===typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],a):b.URI=a(b.punycode,b.IPv6,b.SecondLevelDomains,b);})(this,function(P,N,O,K){function R(b,e){if(!(this instanceof R)){return new R(b,e);}void 0===b&&(b="undefined"!==typeof location?location.href+"":"");this.href(b);return void 0!==e?this.absoluteTo(e):this;}function a(b){return b.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1");}function B(b){return void 0===b?"Undefined":String(Object.prototype.toString.call(b)).slice(8,-1);}function J(b){return"Array"===B(b);}function G(g,l){var k,f;if(J(l)){k=0;for(f=l.length;k<f;k++){if(!G(g,l[k])){return !1;}}return !0;}var h=B(l);k=0;for(f=g.length;k<f;k++){if("RegExp"===h){if("string"===typeof g[k]&&g[k].match(l)){return !0;}}else{if(g[k]===l){return !0;}}}return !1;}function H(f,h){if(!J(f)||!J(h)||f.length!==h.length){return !1;}f.sort();h.sort();for(var g=0,e=f.length;g<e;g++){if(f[g]!==h[g]){return !1;}}return !0;}function o(b){return escape(b);}function M(b){return encodeURIComponent(b).replace(/[!'()*]/g,o).replace(/\*/g,"%2A");}var i=K&&K.URI,Q=R.prototype,I=Object.prototype.hasOwnProperty;R._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:R.duplicateQueryParameters,escapeQuerySpace:R.escapeQuerySpace};};R.duplicateQueryParameters=!1;R.escapeQuerySpace=!0;R.protocol_expression=/^[a-z][a-z0-9-+-]*$/i;R.idn_expression=/[^a-z0-9\.-]/i;R.punycode_expression=/(xn--)/i;R.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;R.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;R.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;R.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};R.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;R.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"};R.getDomAttribute=function(b){if(b&&b.nodeName){var e=b.nodeName.toLowerCase();return"input"===e&&"image"!==b.type?void 0:R.domAttributes[e];}};R.encode=M;R.decode=decodeURIComponent;R.iso8859=function(){R.encode=escape;R.decode=unescape;};R.unicode=function(){R.encode=M;R.decode=decodeURIComponent;};R.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}};R.encodeQuery=function(b,f){var e=R.encode(b+"");return f?e.replace(/%20/g,"+"):e;};R.decodeQuery=function(b,f){b+="";try{return R.decode(f?b.replace(/\+/g,"%20"):b);}catch(e){return b;}};R.recodePath=function(b){b=(b+"").split("/");for(var f=0,e=b.length;f<e;f++){b[f]=R.encodePathSegment(R.decode(b[f]));}return b.join("/");};R.decodePath=function(b){b=(b+"").split("/");for(var f=0,e=b.length;f<e;f++){b[f]=R.decodePathSegment(b[f]);}return b.join("/");};var L={encode:"encode",decode:"decode"},d,c=function(b,e){return function(f){return R[e](f+"").replace(R.characters[b][e].expression,function(g){return R.characters[b][e].map[g];});};};for(d in L){R[d+"PathSegment"]=c("pathname",L[d]);}R.encodeReserved=c("reserved","encode");R.parse=function(b,f){var e;f||(f={});e=b.indexOf("#");-1<e&&(f.fragment=b.substring(e+1)||null,b=b.substring(0,e));e=b.indexOf("?");-1<e&&(f.query=b.substring(e+1)||null,b=b.substring(0,e));"//"===b.substring(0,2)?(f.protocol=null,b=b.substring(2),b=R.parseAuthority(b,f)):(e=b.indexOf(":"),-1<e&&(f.protocol=b.substring(0,e)||null,f.protocol&&!f.protocol.match(R.protocol_expression)?f.protocol=void 0:"file"===f.protocol?b=b.substring(e+3):"//"===b.substring(e+1,e+3)?(b=b.substring(e+3),b=R.parseAuthority(b,f)):(b=b.substring(e+1),f.urn=!0)));f.path=b;return f;};R.parseHost=function(f,h){var g=f.indexOf("/"),e;-1===g&&(g=f.length);"["===f.charAt(0)?(e=f.indexOf("]"),h.hostname=f.substring(1,e)||null,h.port=f.substring(e+2,g)||null):f.indexOf(":")!==f.lastIndexOf(":")?(h.hostname=f.substring(0,g)||null,h.port=null):(e=f.substring(0,g).split(":"),h.hostname=e[0]||null,h.port=e[1]||null);h.hostname&&"/"!==f.substring(g).charAt(0)&&(g++,f="/"+f);return f.substring(g)||"/";};R.parseAuthority=function(b,e){b=R.parseUserinfo(b,e);return R.parseHost(b,e);};R.parseUserinfo=function(e,g){var f=e.indexOf("/"),b=-1<f?e.lastIndexOf("@",f):e.indexOf("@");-1<b&&(-1===f||b<f)?(f=e.substring(0,b).split(":"),g.username=f[0]?R.decode(f[0]):null,f.shift(),g.password=f[0]?R.decode(f.join(":")):null,e=e.substring(b+1)):(g.username=null,g.password=null);return e;};R.parseQuery=function(h,s){if(!h){return{};}h=h.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!h){return{};}for(var r={},b=h.split("&"),q=b.length,p,l,n=0;n<q;n++){p=b[n].split("="),l=R.decodeQuery(p.shift(),s),p=p.length?R.decodeQuery(p.join("="),s):null,r[l]?("string"===typeof r[l]&&(r[l]=[r[l]]),r[l].push(p)):r[l]=p;}return r;};R.build=function(b){var e="";b.protocol&&(e+=b.protocol+":");b.urn||!e&&!b.hostname||(e+="//");e+=R.buildAuthority(b)||"";"string"===typeof b.path&&("/"!==b.path.charAt(0)&&"string"===typeof b.hostname&&(e+="/"),e+=b.path);"string"===typeof b.query&&b.query&&(e+="?"+b.query);"string"===typeof b.fragment&&b.fragment&&(e+="#"+b.fragment);return e;};R.buildHost=function(b){var e="";if(b.hostname){R.ip6_expression.test(b.hostname)?e=b.port?e+("["+b.hostname+"]:"+b.port):e+b.hostname:(e+=b.hostname,b.port&&(e+=":"+b.port));}else{return"";}return e;};R.buildAuthority=function(b){return R.buildUserinfo(b)+R.buildHost(b);};R.buildUserinfo=function(b){var e="";b.username&&(e+=R.encode(b.username),b.password&&(e+=":"+R.encode(b.password)),e+="@");return e;};R.buildQuery=function(h,s,r){var b="",q,p,l,n;for(p in h){if(I.call(h,p)&&p){if(J(h[p])){for(q={},l=0,n=h[p].length;l<n;l++){void 0!==h[p][l]&&void 0===q[h[p][l]+""]&&(b+="&"+R.buildQueryParameter(p,h[p][l],r),!0!==s&&(q[h[p][l]+""]=!0));}}else{void 0!==h[p]&&(b+="&"+R.buildQueryParameter(p,h[p],r));}}}return b.substring(1);};R.buildQueryParameter=function(b,f,e){return R.encodeQuery(b,e)+(null!==f?"="+R.encodeQuery(f,e):"");};R.addQuery=function(e,g,f){if("object"===typeof g){for(var b in g){I.call(g,b)&&R.addQuery(e,b,g[b]);}}else{if("string"===typeof g){void 0===e[g]?e[g]=f:("string"===typeof e[g]&&(e[g]=[e[g]]),J(f)||(f=[f]),e[g]=e[g].concat(f));}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");}}};R.removeQuery=function(g,q,p){var b;if(J(q)){for(p=0,b=q.length;p<b;p++){g[q[p]]=void 0;}}else{if("object"===typeof q){for(b in q){I.call(q,b)&&R.removeQuery(g,b,q[b]);}}else{if("string"===typeof q){if(void 0!==p){if(g[q]===p){g[q]=void 0;}else{if(J(g[q])){b=g[q];var n={},l,h;if(J(p)){for(l=0,h=p.length;l<h;l++){n[p[l]]=!0;}}else{n[p]=!0;}l=0;for(h=b.length;l<h;l++){void 0!==n[b[l]]&&(b.splice(l,1),h--,l--);}g[q]=b;}}}else{g[q]=void 0;}}else{throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");}}}};R.hasQuery=function(f,k,h,b){if("object"===typeof k){for(var g in k){if(I.call(k,g)&&!R.hasQuery(f,g,k[g])){return !1;}}return !0;}if("string"!==typeof k){throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");}switch(B(h)){case"Undefined":return k in f;case"Boolean":return f=Boolean(J(f[k])?f[k].length:f[k]),h===f;case"Function":return !!h(f[k],k,f);case"Array":return J(f[k])?(b?G:H)(f[k],h):!1;case"RegExp":return J(f[k])?b?G(f[k],h):!1:Boolean(f[k]&&f[k].match(h));case"Number":h=String(h);case"String":return J(f[k])?b?G(f[k],h):!1:f[k]===h;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");}};R.commonPath=function(f,h){var g=Math.min(f.length,h.length),e;for(e=0;e<g;e++){if(f.charAt(e)!==h.charAt(e)){e--;break;}}if(1>e){return f.charAt(0)===h.charAt(0)&&"/"===f.charAt(0)?"/":"";}if("/"!==f.charAt(e)||"/"!==h.charAt(e)){e=f.substring(0,e).lastIndexOf("/");}return f.substring(0,e+1);};R.withinString=function(b,e){return b.replace(R.find_uri_expression,e);};R.ensureValidHostname=function(b){if(b.match(R.invalid_hostname_characters)){if(!P){throw new TypeError("Hostname '"+b+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");}if(P.toASCII(b).match(R.invalid_hostname_characters)){throw new TypeError("Hostname '"+b+"' contains characters other than [A-Z0-9.-]");}}};R.noConflict=function(b){if(b){return b={URI:this.noConflict()},URITemplate&&"function"==typeof URITemplate.noConflict&&(b.URITemplate=URITemplate.noConflict()),N&&"function"==typeof N.noConflict&&(b.IPv6=N.noConflict()),SecondLevelDomains&&"function"==typeof SecondLevelDomains.noConflict&&(b.SecondLevelDomains=SecondLevelDomains.noConflict()),b;}K.URI===this&&(K.URI=i);return this;};Q.build=function(b){if(!0===b){this._deferred_build=!0;}else{if(void 0===b||this._deferred_build){this._string=R.build(this._parts),this._deferred_build=!1;}}return this;};Q.clone=function(){return new R(this);};Q.valueOf=Q.toString=function(){return this.build(!1)._string;};L={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"};c=function(b){return function(f,e){if(void 0===f){return this._parts[b]||"";}this._parts[b]=f||null;this.build(!e);return this;};};for(d in L){Q[d]=c(L[d]);}L={query:"?",fragment:"#"};c=function(b,e){return function(g,f){if(void 0===g){return this._parts[b]||"";}null!==g&&(g+="",g.charAt(0)===e&&(g=g.substring(1)));this._parts[b]=g;this.build(!f);return this;};};for(d in L){Q[d]=c(d,L[d]);}L={search:["?","query"],hash:["#","fragment"]};c=function(b,e){return function(h,f){var g=this[b](h,f);return"string"===typeof g&&g.length?e+g:g;};};for(d in L){Q[d]=c(L[d][1],L[d][0]);}Q.pathname=function(b,f){if(void 0===b||!0===b){var e=this._parts.path||(this._parts.hostname?"/":"");return b?R.decodePath(e):e;}this._parts.path=b?R.recodePath(b):"/";this.build(!f);return this;};Q.path=Q.pathname;Q.href=function(b,l){var k;if(void 0===b){return this.toString();}this._string="";this._parts=R._parts();var h=b instanceof R,g="object"===typeof b&&(b.hostname||b.path||b.pathname);b.nodeName&&(g=R.getDomAttribute(b),b=b[g]||"",g=!1);!h&&g&&void 0!==b.pathname&&(b=b.toString());if("string"===typeof b){this._parts=R.parse(b,this._parts);}else{if(h||g){for(k in h=h?b._parts:b,h){I.call(this._parts,k)&&(this._parts[k]=h[k]);}}else{throw new TypeError("invalid input");}}this.build(!l);return this;};Q.is=function(u){var t=!1,q=!1,p=!1,n=!1,g=!1,v=!1,b=!1,l=!this._parts.urn;this._parts.hostname&&(l=!1,q=R.ip4_expression.test(this._parts.hostname),p=R.ip6_expression.test(this._parts.hostname),t=q||p,g=(n=!t)&&O&&O.has(this._parts.hostname),v=n&&R.idn_expression.test(this._parts.hostname),b=n&&R.punycode_expression.test(this._parts.hostname));switch(u.toLowerCase()){case"relative":return l;case"absolute":return !l;case"domain":case"name":return n;case"sld":return g;case"ip":return t;case"ip4":case"ipv4":case"inet4":return q;case"ip6":case"ipv6":case"inet6":return p;case"idn":return v;case"url":return !this._parts.urn;case"urn":return !!this._parts.urn;case"punycode":return b;}return null;};var j=Q.protocol,C=Q.port,A=Q.hostname;Q.protocol=function(b,e){if(void 0!==b&&b&&(b=b.replace(/:(\/\/)?$/,""),b.match(/[^a-zA-z0-9\.+-]/))){throw new TypeError("Protocol '"+b+"' contains characters other than [A-Z0-9.+-]");}return j.call(this,b,e);};Q.scheme=Q.protocol;Q.port=function(b,e){if(this._parts.urn){return void 0===b?"":this;}if(void 0!==b&&(0===b&&(b=null),b&&(b+="",":"===b.charAt(0)&&(b=b.substring(1)),b.match(/[^0-9]/)))){throw new TypeError("Port '"+b+"' contains characters other than [0-9]");}return C.call(this,b,e);};Q.hostname=function(b,f){if(this._parts.urn){return void 0===b?"":this;}if(void 0!==b){var e={};R.parseHost(b,e);b=e.hostname;}return A.call(this,b,f);};Q.host=function(b,e){if(this._parts.urn){return void 0===b?"":this;}if(void 0===b){return this._parts.hostname?R.buildHost(this._parts):"";}R.parseHost(b,this._parts);this.build(!e);return this;};Q.authority=function(b,e){if(this._parts.urn){return void 0===b?"":this;}if(void 0===b){return this._parts.hostname?R.buildAuthority(this._parts):"";}R.parseAuthority(b,this._parts);this.build(!e);return this;};Q.userinfo=function(b,f){if(this._parts.urn){return void 0===b?"":this;}if(void 0===b){if(!this._parts.username){return"";}var e=R.buildUserinfo(this._parts);return e.substring(0,e.length-1);}"@"!==b[b.length-1]&&(b+="@");R.parseUserinfo(b,this._parts);this.build(!f);return this;};Q.resource=function(b,f){var e;if(void 0===b){return this.path()+this.search()+this.hash();}e=R.parse(b);this._parts.path=e.path;this._parts.query=e.query;this._parts.fragment=e.fragment;this.build(!f);return this;};Q.subdomain=function(b,f){if(this._parts.urn){return void 0===b?"":this;}if(void 0===b){if(!this._parts.hostname||this.is("IP")){return"";}var e=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,e)||"";}e=this._parts.hostname.length-this.domain().length;e=this._parts.hostname.substring(0,e);e=RegExp("^"+a(e));b&&"."!==b.charAt(b.length-1)&&(b+=".");b&&R.ensureValidHostname(b);this._parts.hostname=this._parts.hostname.replace(e,b);this.build(!f);return this;};Q.domain=function(b,f){if(this._parts.urn){return void 0===b?"":this;}"boolean"===typeof b&&(f=b,b=void 0);if(void 0===b){if(!this._parts.hostname||this.is("IP")){return"";}var e=this._parts.hostname.match(/\./g);if(e&&2>e.length){return this._parts.hostname;}e=this._parts.hostname.length-this.tld(f).length-1;e=this._parts.hostname.lastIndexOf(".",e-1)+1;return this._parts.hostname.substring(e)||"";}if(!b){throw new TypeError("cannot set domain empty");}R.ensureValidHostname(b);!this._parts.hostname||this.is("IP")?this._parts.hostname=b:(e=RegExp(a(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(e,b));this.build(!f);return this;};Q.tld=function(b,f){if(this._parts.urn){return void 0===b?"":this;}"boolean"===typeof b&&(f=b,b=void 0);if(void 0===b){if(!this._parts.hostname||this.is("IP")){return"";}var e=this._parts.hostname.lastIndexOf("."),e=this._parts.hostname.substring(e+1);return !0!==f&&O&&O.list[e.toLowerCase()]?O.get(this._parts.hostname)||e:e;}if(b){if(b.match(/[^a-zA-Z0-9-]/)){if(O&&O.is(b)){e=RegExp(a(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(e,b);}else{throw new TypeError("TLD '"+b+"' contains characters other than [A-Z0-9]");}}else{if(!this._parts.hostname||this.is("IP")){throw new ReferenceError("cannot set TLD on non-domain host");}e=RegExp(a(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(e,b);}}else{throw new TypeError("cannot set TLD empty");}this.build(!f);return this;};Q.directory=function(b,f){if(this._parts.urn){return void 0===b?"":this;}if(void 0===b||!0===b){if(!this._parts.path&&!this._parts.hostname){return"";}if("/"===this._parts.path){return"/";}var e=this._parts.path.length-this.filename().length-1,e=this._parts.path.substring(0,e)||(this._parts.hostname?"/":"");return b?R.decodePath(e):e;}e=this._parts.path.length-this.filename().length;e=this._parts.path.substring(0,e);e=RegExp("^"+a(e));this.is("relative")||(b||(b="/"),"/"!==b.charAt(0)&&(b="/"+b));b&&"/"!==b.charAt(b.length-1)&&(b+="/");b=R.recodePath(b);this._parts.path=this._parts.path.replace(e,b);this.build(!f);return this;};Q.filename=function(b,h){if(this._parts.urn){return void 0===b?"":this;}if(void 0===b||!0===b){if(!this._parts.path||"/"===this._parts.path){return"";}var g=this._parts.path.lastIndexOf("/"),g=this._parts.path.substring(g+1);return b?R.decodePathSegment(g):g;}g=!1;"/"===b.charAt(0)&&(b=b.substring(1));b.match(/\.?\//)&&(g=!0);var f=RegExp(a(this.filename())+"$");b=R.recodePath(b);this._parts.path=this._parts.path.replace(f,b);g?this.normalizePath(h):this.build(!h);return this;};Q.suffix=function(b,h){if(this._parts.urn){return void 0===b?"":this;}if(void 0===b||!0===b){if(!this._parts.path||"/"===this._parts.path){return"";}var g=this.filename(),f=g.lastIndexOf(".");if(-1===f){return"";}g=g.substring(f+1);g=/^[a-z0-9%]+$/i.test(g)?g:"";return b?R.decodePathSegment(g):g;}"."===b.charAt(0)&&(b=b.substring(1));if(g=this.suffix()){f=b?RegExp(a(g)+"$"):RegExp(a("."+g)+"$");}else{if(!b){return this;}this._parts.path+="."+R.recodePath(b);}f&&(b=R.recodePath(b),this._parts.path=this._parts.path.replace(f,b));this.build(!h);return this;};Q.segment=function(h,r,q){var g=this._parts.urn?":":"/",p=this.path(),n="/"===p.substring(0,1),p=p.split(g);void 0!==h&&"number"!==typeof h&&(q=r,r=h,h=void 0);if(void 0!==h&&"number"!==typeof h){throw Error("Bad segment '"+h+"', must be 0-based integer");}n&&p.shift();0>h&&(h=Math.max(p.length+h,0));if(void 0===r){return void 0===h?p:p[h];}if(null===h||void 0===p[h]){if(J(r)){p=[];h=0;for(var l=r.length;h<l;h++){if(r[h].length||p.length&&p[p.length-1].length){p.length&&!p[p.length-1].length&&p.pop(),p.push(r[h]);}}}else{if(r||"string"===typeof r){""===p[p.length-1]?p[p.length-1]=r:p.push(r);}}}else{r||"string"===typeof r&&r.length?p[h]=r:p.splice(h,1);}n&&p.unshift("");return this.path(p.join(g),q);};Q.segmentCoded=function(b,l,k){var h,g;"number"!==typeof b&&(k=l,l=b,b=void 0);if(void 0===l){b=this.segment(b,l,k);if(J(b)){for(h=0,g=b.length;h<g;h++){b[h]=R.decode(b[h]);}}else{b=void 0!==b?R.decode(b):void 0;}return b;}if(J(l)){for(h=0,g=l.length;h<g;h++){l[h]=R.decode(l[h]);}}else{l="string"===typeof l?R.encode(l):l;}return this.segment(b,l,k);};var m=Q.query;Q.query=function(b,h){if(!0===b){return R.parseQuery(this._parts.query,this._parts.escapeQuerySpace);}if("function"===typeof b){var g=R.parseQuery(this._parts.query,this._parts.escapeQuerySpace),f=b.call(this,g);this._parts.query=R.buildQuery(f||g,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!h);return this;}return void 0!==b&&"string"!==typeof b?(this._parts.query=R.buildQuery(b,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!h),this):m.call(this,b,h);};Q.setQuery=function(b,l,k){var h=R.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"===typeof b){for(var g in b){I.call(b,g)&&(h[g]=b[g]);}}else{if("string"===typeof b){h[b]=void 0!==l?l:null;}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");}}this._parts.query=R.buildQuery(h,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof b&&(k=l);this.build(!k);return this;};Q.addQuery=function(b,h,g){var f=R.parseQuery(this._parts.query,this._parts.escapeQuerySpace);R.addQuery(f,b,void 0===h?null:h);this._parts.query=R.buildQuery(f,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof b&&(g=h);this.build(!g);return this;};Q.removeQuery=function(b,h,g){var f=R.parseQuery(this._parts.query,this._parts.escapeQuerySpace);R.removeQuery(f,b,h);this._parts.query=R.buildQuery(f,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof b&&(g=h);this.build(!g);return this;};Q.hasQuery=function(b,h,g){var f=R.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return R.hasQuery(f,b,h,g);};Q.setSearch=Q.setQuery;Q.addSearch=Q.addQuery;Q.removeSearch=Q.removeQuery;Q.hasSearch=Q.hasQuery;Q.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build();};Q.normalizeProtocol=function(b){"string"===typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!b));return this;};Q.normalizeHostname=function(b){this._parts.hostname&&(this.is("IDN")&&P?this._parts.hostname=P.toASCII(this._parts.hostname):this.is("IPv6")&&N&&(this._parts.hostname=N.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!b));return this;};Q.normalizePort=function(b){"string"===typeof this._parts.protocol&&this._parts.port===R.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!b));return this;};Q.normalizePath=function(b){if(this._parts.urn||!this._parts.path||"/"===this._parts.path){return this;}var l,k=this._parts.path,h,g;"/"!==k.charAt(0)&&(l=!0,k="/"+k);for(k=k.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");;){h=k.indexOf("/../");if(-1===h){break;}else{if(0===h){k=k.substring(3);break;}}g=k.substring(0,h).lastIndexOf("/");-1===g&&(g=h);k=k.substring(0,g)+k.substring(h+3);}l&&this.is("relative")&&(k=k.substring(1));k=R.recodePath(k);this._parts.path=k;this.build(!b);return this;};Q.normalizePathname=Q.normalizePath;Q.normalizeQuery=function(b){"string"===typeof this._parts.query&&(this._parts.query.length?this.query(R.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!b));return this;};Q.normalizeFragment=function(b){this._parts.fragment||(this._parts.fragment=null,this.build(!b));return this;};Q.normalizeSearch=Q.normalizeQuery;Q.normalizeHash=Q.normalizeFragment;Q.iso8859=function(){var b=R.encode,e=R.decode;R.encode=escape;R.decode=decodeURIComponent;this.normalize();R.encode=b;R.decode=e;return this;};Q.unicode=function(){var b=R.encode,e=R.decode;R.encode=M;R.decode=unescape;this.normalize();R.encode=b;R.decode=e;return this;};Q.readable=function(){var b=this.clone();b.username("").password("").normalize();var q="";b._parts.protocol&&(q+=b._parts.protocol+"://");b._parts.hostname&&(b.is("punycode")&&P?(q+=P.toUnicode(b._parts.hostname),b._parts.port&&(q+=":"+b._parts.port)):q+=b.host());b._parts.hostname&&b._parts.path&&"/"!==b._parts.path.charAt(0)&&(q+="/");q+=b.path(!0);if(b._parts.query){for(var p="",n=0,f=b._parts.query.split("&"),l=f.length;n<l;n++){var h=(f[n]||"").split("="),p=p+("&"+R.decodeQuery(h[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"));void 0!==h[1]&&(p+="="+R.decodeQuery(h[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"));}q+="?"+p.substring(1);}return q+=R.decodeQuery(b.hash(),!0);};Q.absoluteTo=function(b){var l=this.clone(),k=["protocol","username","password","hostname","port"],h,g;if(this._parts.urn){throw Error("URNs do not have any generally defined hierarchical components");}b instanceof R||(b=new R(b));l._parts.protocol||(l._parts.protocol=b._parts.protocol);if(this._parts.hostname){return l;}for(h=0;g=k[h];h++){l._parts[g]=b._parts[g];}k=["query","path"];for(h=0;g=k[h];h++){!l._parts[g]&&b._parts[g]&&(l._parts[g]=b._parts[g]);}"/"!==l.path().charAt(0)&&(b=b.directory(),l._parts.path=(b?b+"/":"")+l._parts.path,l.normalizePath());l.build();return l;};Q.relativeTo=function(b){var p=this.clone().normalize(),n,l,h,g;if(p._parts.urn){throw Error("URNs do not have any generally defined hierarchical components");}b=(new R(b)).normalize();n=p._parts;l=b._parts;h=p.path();g=b.path();if("/"!==h.charAt(0)){throw Error("URI is already relative");}if("/"!==g.charAt(0)){throw Error("Cannot calculate a URI relative to another relative URI");}n.protocol===l.protocol&&(n.protocol=null);if(n.username===l.username&&n.password===l.password&&null===n.protocol&&null===n.username&&null===n.password&&n.hostname===l.hostname&&n.port===l.port){n.hostname=null,n.port=null;}else{return p.build();}if(h===g){return n.path="",p.build();}b=R.commonPath(p.path(),b.path());if(!b){return p.build();}l=l.path.substring(b.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");n.path=l+n.path.substring(b.length);return p.build();};Q.equals=function(b){var p=this.clone();b=new R(b);var n={},l={},h={},g;p.normalize();b.normalize();if(p.toString()===b.toString()){return !0;}n=p.query();l=b.query();p.query("");b.query("");if(p.toString()!==b.toString()||n.length!==l.length){return !1;}n=R.parseQuery(n,this._parts.escapeQuerySpace);l=R.parseQuery(l,this._parts.escapeQuerySpace);for(g in n){if(I.call(n,g)){if(!J(n[g])){if(n[g]!==l[g]){return !1;}}else{if(!H(n[g],l[g])){return !1;}}h[g]=!0;}}for(g in l){if(I.call(l,g)&&!h[g]){return !1;}}return !0;};Q.duplicateQueryParameters=function(b){this._parts.duplicateQueryParameters=!!b;return this;};Q.escapeQuerySpace=function(b){this._parts.escapeQuerySpace=!!b;return this;};return R;});(function(b,a){"object"===typeof exports?module.exports=a(require("./URI")):"function"===typeof define&&define.amd?define(["./URI"],a):b.URITemplate=a(b.URI,b);})(this,function(i,d){function e(f){if(e._cache[f]){return e._cache[f];}if(!(this instanceof e)){return new e(f);}this.expression=f;e._cache[f]=this;return this;}function l(f){this.data=f;this.cache={};}var a=d&&d.URITemplate,k=Object.prototype.hasOwnProperty,c=e.prototype,j={"":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encode"},"+":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},"#":{prefix:"#",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},".":{prefix:".",separator:".",named:!1,empty_name_separator:!1,encode:"encode"},"/":{prefix:"/",separator:"/",named:!1,empty_name_separator:!1,encode:"encode"},";":{prefix:";",separator:";",named:!0,empty_name_separator:!1,encode:"encode"},"?":{prefix:"?",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"},"&":{prefix:"&",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"}};e._cache={};e.EXPRESSION_PATTERN=/\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g;e.VARIABLE_PATTERN=/^([^*:]+)((\*)|:(\d+))?$/;e.VARIABLE_NAME_PATTERN=/[^a-zA-Z0-9%_]/;e.expand=function(s,p){var o=j[s.operator],n=o.named?"Named":"Unnamed",u=s.variables,r=[],g,m,t;for(t=0;m=u[t];t++){g=p.get(m.name),g.val.length?r.push(e["expand"+n](g,o,m.explode,m.explode&&o.separator||",",m.maxlength,m.name)):g.type&&r.push("");}return r.length?o.prefix+r.join(o.separator):"";};e.expandNamed=function(B,x,u,s,C,z){var f="",r=x.encode;x=x.empty_name_separator;var m=!B[r].length,A=2===B.type?"":i[r](z),D,o,E;o=0;for(E=B.val.length;o<E;o++){C?(D=i[r](B.val[o][1].substring(0,C)),2===B.type&&(A=i[r](B.val[o][0].substring(0,C)))):m?(D=i[r](B.val[o][1]),2===B.type?(A=i[r](B.val[o][0]),B[r].push([A,D])):B[r].push([void 0,D])):(D=B[r][o][1],2===B.type&&(A=B[r][o][0])),f&&(f+=s),u?f+=A+(x||D?"=":"")+D:(o||(f+=i[r](z)+(x||D?"=":"")),2===B.type&&(f+=A+","),f+=D);}return f;};e.expandUnnamed=function(z,x,u,s,A,y){y="";var f=x.encode;x=x.empty_name_separator;var r=!z[f].length,m,o,B,C;B=0;for(C=z.val.length;B<C;B++){A?o=i[f](z.val[B][1].substring(0,A)):r?(o=i[f](z.val[B][1]),z[f].push([2===z.type?i[f](z.val[B][0]):void 0,o])):o=z[f][B][1],y&&(y+=s),2===z.type&&(m=A?i[f](z.val[B][0].substring(0,A)):z[f][B][0],y+=m,y=u?y+(x||o?"=":""):y+","),y+=o;}return y;};e.noConflict=function(){d.URITemplate===e&&(d.URITemplate=a);return e;};c.expand=function(g){var o="";this.parts&&this.parts.length||this.parse();g instanceof l||(g=new l(g));for(var n=0,m=this.parts.length;n<m;n++){o+="string"===typeof this.parts[n]?this.parts[n]:e.expand(this.parts[n],g);}return o;};c.parse=function(){var x=this.expression,s=e.EXPRESSION_PATTERN,r=e.VARIABLE_PATTERN,p=e.VARIABLE_NAME_PATTERN,y=[],u=0,g,o,m;for(s.lastIndex=0;;){o=s.exec(x);if(null===o){y.push(x.substring(u));break;}else{y.push(x.substring(u,o.index)),u=o.index+o[0].length;}if(!j[o[1]]){throw Error('Unknown Operator "'+o[1]+'" in "'+o[0]+'"');}if(!o[3]){throw Error('Unclosed Expression "'+o[0]+'"');}g=o[2].split(",");for(var A=0,z=g.length;A<z;A++){m=g[A].match(r);if(null===m){throw Error('Invalid Variable "'+g[A]+'" in "'+o[0]+'"');}if(m[1].match(p)){throw Error('Invalid Variable Name "'+m[1]+'" in "'+o[0]+'"');}g[A]={name:m[1],explode:!!m[3],maxlength:m[4]&&parseInt(m[4],10)};}if(!g.length){throw Error('Expression Missing Variable(s) "'+o[0]+'"');}y.push({expression:o[0],operator:o[1],variables:g});}y.length||y.push(x);this.parts=y;return this;};l.prototype.get=function(h){var o=this.data,n={type:0,val:[],encode:[],encodeReserved:[]},m;if(void 0!==this.cache[h]){return this.cache[h];}this.cache[h]=n;o="[object Function]"===String(Object.prototype.toString.call(o))?o(h):"[object Function]"===String(Object.prototype.toString.call(o[h]))?o[h](h):o[h];if(void 0!==o&&null!==o){if("[object Array]"===String(Object.prototype.toString.call(o))){m=0;for(h=o.length;m<h;m++){void 0!==o[m]&&null!==o[m]&&n.val.push([void 0,String(o[m])]);}n.val.length&&(n.type=3);}else{if("[object Object]"===String(Object.prototype.toString.call(o))){for(m in o){k.call(o,m)&&void 0!==o[m]&&null!==o[m]&&n.val.push([m,String(o[m])]);}n.val.length&&(n.type=2);}else{n.type=1,n.val.push([void 0,String(o)]);}}}return n;};i.expand=function(f,g){var m=(new e(f)).expand(g);return new i(m);};return e;});(function(b,a){"object"===typeof exports?module.exports=a(require("jquery","./URI")):"function"===typeof define&&define.amd?define(["jquery","./URI"],a):a(b.jQuery,b.URI);})(this,function(j,e){function i(f){return f.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1");}function d(g){var h=g.nodeName.toLowerCase();return"input"===h&&"image"!==g.type?void 0:e.domAttributes[h];}function l(f){return{get:function(b){return j(b).uri()[f]();},set:function(b,h){j(b).uri()[f](h);return h;}};}function k(f,r){var s,p,n;if(!d(f)||!r){return !1;}s=r.match(m);if(!s||!s[5]&&":"!==s[2]&&!c[s[2]]){return !1;}n=j(f).uri();if(s[5]){return n.is(s[5]);}if(":"===s[2]){return p=s[1].toLowerCase()+":",c[p]?c[p](n,s[4]):!1;}p=s[1].toLowerCase();return o[p]?c[s[2]](n[p](),s[4],p):!1;}var o={},c={"=":function(g,h){return g===h;},"^=":function(g,h,n){return !!(g+"").match(RegExp("^"+i(h),"i"));},"$=":function(g,h,n){return !!(g+"").match(RegExp(i(h)+"$","i"));},"*=":function(g,h,n){"directory"==n&&(g+="/");return !!(g+"").match(RegExp(i(h),"i"));},"equals:":function(g,h){return g.equals(h);},"is:":function(g,h){return g.is(h);}};j.each("authority directory domain filename fragment hash host hostname href password path pathname port protocol query resource scheme search subdomain suffix tld username".split(" "),function(f,b){o[b]=!0;j.attrHooks["uri:"+b]=l(b);});var q=function(f,h){return j(f).uri().href(h).toString();};j.each(["src","href","action","uri","cite"],function(f,h){j.attrHooks[h]={set:q};});j.attrHooks.uri.get=function(f){return j(f).uri();};j.fn.uri=function(h){var r=this.first(),s=r.get(0),p=d(s);if(!p){throw Error('Element "'+s.nodeName+'" does not have either property: href, src, action, cite');}if(void 0!==h){var n=r.data("uri");if(n){return n.href(h);}h instanceof e||(h=e(h||""));}else{if(h=r.data("uri")){return h;}h=e(r.attr(p)||"");}h._dom_element=s;h._dom_attribute=p;h.normalize();r.data("uri",h);return h;};e.prototype.build=function(f){if(this._dom_element){this._string=e.build(this._parts),this._deferred_build=!1,this._dom_element.setAttribute(this._dom_attribute,this._string),this._dom_element[this._dom_attribute]=this._string;}else{if(!0===f){this._deferred_build=!0;}else{if(void 0===f||this._deferred_build){this._string=e.build(this._parts),this._deferred_build=!1;}}}return this;};var a,m=/^([a-zA-Z]+)\s*([\^\$*]?=|:)\s*(['"]?)(.+)\3|^\s*([a-zA-Z0-9]+)\s*$/;a=j.expr.createPseudo?j.expr.createPseudo(function(f){return function(b){return k(b,f);};}):function(g,h,n){return k(g,n[3]);};j.expr[":"].uri=a;return{};});(function(){$.fn.clicktoggle=function(d,c,e){return this.each(function(){if(e==""){var a=false;}else{if($(this).hasClass(e)){a=false;}else{a=true;}}$(this).click(function(){if(a){a=false;return c.apply(this,arguments);}a=true;return d.apply(this,arguments);});});};})();(function(){Ceneje.closeFilters=function(a){$(this).addClass("close");$(this).nextAll(".filtersBox").eq(0).slideToggle();};Ceneje.openFilters=function(a){$(this).removeClass("close");$(this).nextAll(".filtersBox").eq(0).slideToggle();};Ceneje.initFilterEvents=function(a){$("h4.close").each(function(){$(this).one("click",function(){GaTrackEvent(a,"sidebarFilters","openFilter");});});};Ceneje.initFilterToggle=function(a){Ceneje.DebugTime("initFilterToggle");$('.filters .filtersBox:not([data-filterOpen="true"])').hide();$('.filters .filtersBox:not([data-filterOpen="true"])').prev().prev().addClass("close");$(".filters h4").clicktoggle(Ceneje.openFilters,Ceneje.closeFilters,"close");Ceneje.DebugTimeEnd("initFilterToggle");};Ceneje.bindFilterInputToSlider=function(){$("#lowestPrice").change(function(){var a;if(this.value.indexOf($$("Currency"))>-1){a=this.value.replace($$("Currency"),"").trim();}else{a=this.value.trim();this.value=this.value.trim()+" "+$$("Currency");}$(this).closest(".sliderRangePrices").siblings("#slider-range").slider("values",0,a);});$("#highestPrice").change(function(){var a;if(this.value.indexOf($$("Currency"))>-1){a=this.value.replace($$("Currency"),"").trim();}else{a=this.value.trim();this.value=this.value.trim()+" "+$$("Currency");}$(this).closest(".sliderRangePrices").siblings("#slider-range").slider("values",1,a);});$("input[id^='loRange']").change(function(){$(this).closest(".sliderRangePrices").siblings("div[id^='slider-range']").slider("values",0,this.value);});$("input[id^='hiRange']").change(function(){$(this).closest(".sliderRangePrices").siblings("div[id^='slider-range']").slider("values",1,this.value);});};Ceneje.bindFastFilterLinksSlide=function(){Ceneje.DebugTime("bindFastFilterLinksSlide");$(".topFilters .linksBar .tipsL a").click(function(){$(".tipsCon").slideToggle();return false;});Ceneje.DebugTimeEnd("bindFastFilterLinksSlide");};Ceneje.bindSizesAndColors=function(){var a=function(){$(".sizesAndColorsPartial .left .leftSide > div.value").resizeFontToScale(250,20);};setTimeout(function(){a();},1000);$(".sizesAndColorsPartial .right").attachDragger();var b=$(".sizesAndColorsPartial");b.on("click",".left",function(g){var c=$(".values",this);var d=$(".rightSide ",this);var f=$(this);if(c.hasClass("hidden")){c.removeClass("hidden");d.addClass("close");f.addClass("nonborder");}else{c.addClass("hidden");d.removeClass("close");f.removeClass("nonborder");}});$(window).click(function(i){var c=$(".sizesAndColorsPartial ");var f=$(".values",c);var g=$(".rightSide ",c);var d=$(i.target).parents(".sizesAndColorsPartial").length===0;var h=$(".left",c);if(d){f.addClass("hidden");g.removeClass("close");h.removeClass("nonborder");}});};Ceneje.setSideBarFilter=function(){var a=$("#floatingFilterContainer");var d=$("#body");var c=$("#mainContainer");function b(){a.toggleClass("active");d.toggleClass("noScroll");}d.append(a);c.find(a).remove();if(a.hasClass("active")){d.addClass("noScroll");}Ceneje.setSideBarFilter_openFilters=function(){b();};Ceneje.setSideBarFilter_closeFilters=function(){b();};a.on("click","#closeFilter",function(){b();});};})();(function(){Ceneje.bindSortDropdown=function(){Ceneje.DebugTime("bindSortDropdown");$("body").on("click",".popularityDropdown",function(){$(this).find("ul").toggle();});Ceneje.DebugTimeEnd("bindSortDropdown");};})();(function(){Ceneje.AjaxBrowsing={};Ceneje.AjaxBrowsing.getCrftPackedString=function(g,e,n,o,p){var m=URI(decodeURIComponent(location.href));var j=m.query().split("&");var d={};for(var f=0;f<j.length;f++){var l=j[f].split("=");if(!l||!l[0]||!l[1]){continue;}d[l[0]]=l[1].split(",");}var b=d.crft;if(!b){b=[];}if(typeof b==="string"){b=b.split(",");}var q={};for(var c=0;c<b.length;c++){q[b[c].split(":")[0]]=b[c].split(":")[1];}if(o==e&&p==n){delete q[g];}else{q[g]=(o+"~"+p).replace(",",".");}var a="";for(var h in q){if(q[h]){a+=h+":"+q[h]+",";}}a=a.substr(0,a.length-1);return a;};Ceneje.AjaxBrowsing.getCrazPackedString=function(c,b,a,e){if(a==c&&e==b){return"";}if(Number(a)>=Number(e)){return"";}var d="";if(!isNaN(a)||!isNaN(e)){if(isNaN(a)||a==0){d="DZ"+e;}else{if(isNaN(e)||e==0){d="OZ"+a;}else{d="BZ"+a+"Z"+e;}}}return(d.replace(",","."));};Ceneje.AjaxBrowsing.setCurrentParamsAndReload=function(a,d){var b="";for(var c in d){if(d[c]){b+=c+"="+d[c]+"&";}}b=b.substr(0,b.length-1);a.query(b);window.location=a.toString();};Ceneje.AjaxBrowsing.sortDropdown=function(){if($(".popularityChoices").length>0){$(document).on("click",".popularityChoices li",function(){var b=URI(decodeURIComponent(location.href));var c=b.query().split("&");var d={};for(var a=0;a<c.length;a++){var e=c[a].split("=");if(!e||!e[0]||!e[1]){continue;}d[e[0]]=e[1].split(",");}d.sort=$(this).data("sortval");d.page=null;Ceneje.AjaxBrowsing.setCurrentParamsAndReload(b,d);});}};Ceneje.AjaxBrowsing.priceRangeFilter=function(){if($("#slider-range").length>0){$("#slider-range").slider({range:true,min:parseInt($("#minValue").val()),max:parseInt($("#maxValue").val()),values:[parseInt($("#lowestPrice").val()),parseInt($("#highestPrice").val())],slide:function(a,b){$("#lowestPrice").val(b.values[0]+" "+$$("Currency"));$("#highestPrice").val(b.values[1]+" "+$$("Currency"));},change:function(b,h){$("#lowestPrice").val(h.values[0]+" "+$$("Currency"));$("#highestPrice").val(h.values[1]+" "+$$("Currency"));var k=Ceneje.AjaxBrowsing.getCrazPackedString($(this).slider("option","min"),$(this).slider("option","max"),h.values[0],h.values[1]);var j=URI(decodeURIComponent(location.href));var e=j.query().split("&");var c={};for(var d=0;d<e.length;d++){var g=e[d].split("=");if(!g||!g[0]||!g[1]){continue;}c[g[0]]=g[1].split(",");}c.craz=k;c.page=null;var f="";for(var a in c){if(c[a]){f+=a+"="+c[a]+"&";}}f=f.substr(0,f.length-1);j.query(f);window.location=j.toString();}});$("#lowestPrice").val($("#slider-range").slider("values",0)+" "+$$("Currency"));$("#highestPrice").val($("#slider-range").slider("values",1)+" "+$$("Currency"));}};Ceneje.AjaxBrowsing.customRangeFilters=function(){$("div[boxtype='crft']").each(function(){var a=$(this).data("idatt");if(!parseInt(a)>0){return;}$(this).slider({range:true,min:Number($("#minValue-"+a).val()),max:Number($("#maxValue-"+a).val()),values:[Number($("#loRange-"+a).val()),Number($("#hiRange-"+a).val())],slide:function(b,c){$("#loRange-"+a).val(c.values[0]);$("#hiRange-"+a).val(c.values[1]);},step:Number($(this).data("step")),change:function(c,k){$("#loRange-"+a).val(k.values[0]);$("#hiRange-"+a).val(k.values[1]);var l=URI(decodeURIComponent(location.href));var g=l.query().split("&");var d={};for(var f=0;f<g.length;f++){var j=g[f].split("=");if(!j||!j[0]||!j[1]){continue;}d[j[0]]=j[1].split(",");}var e=Ceneje.AjaxBrowsing.getCrftPackedString(a,$(this).slider("option","min"),$(this).slider("option","max"),k.values[0],k.values[1]);d.crft=e;d.page=null;var h="";for(var b in d){if(d[b]){h+=b+"="+d[b]+"&";}}h=h.substr(0,h.length-1);l.query(h);window.location=l.toString();}});});};Ceneje.AjaxBrowsing.isqFilter=function(){$("#IsqFilterValue").on("keypress",function(c){if(c.which===13){var a=$("#IsqFilterValue").val();var b=removeURLParameter("page",window.location.href);if(a!==""){window.location.href=UpdateQueryString("isq",a,b);}else{window.location.href=removeURLParameter("isq",b);}}});$("#IsqFilter").click(function(){var a=$("#IsqFilterValue").val();var b=removeURLParameter("page",window.location.href);if(a!==""){window.location.href=UpdateQueryString("isq",a,b);}else{window.location.href=removeURLParameter("isq",b);}});};Ceneje.AjaxBrowsing.tiresWidget=function(){$(document).on("change",".filtersBar .regInput",function(a){var c=URI(decodeURIComponent(location.href));var b="";var d="";$(".filtersBar .tiresFilt").each(function(){if(this.value!="0"){if(d!=""){d+=","+$("option:selected",this).data("att")+":"+this.value;}else{d+=$("option:selected",this).data("att")+":"+this.value;}}});if(d!==""){b=updateURLParameter(window.location.href,"filt",d);d="filt="+d;}$(".filtersBar .tiresCat").each(function(){if(this.value!="0"){c.path("/L3/"+this.value);}});c.query(d);if(b!==""){window.location.href=removeURLParameter("page",b);}else{window.location.href=removeURLParameter("page",c.toString());}});};Ceneje.AjaxBrowsing.compare=function(){var a=$("#mainContent").data("categoryid");$(document).on("click",'[name="compare"]',function(c){var d=this.getAttribute("id");var b;if(getURLParameter("compareProducts","")=="null"){return;}else{if(getURLParameter("compareProducts","").search(d)==-1){b=updateURLParameter(window.location.href,"compareProducts",getURLParameter("compareProducts","")+","+d);}else{b=updateURLParameter(window.location.href,"compareProducts",removeCompareProduct(d));}}c.preventDefault();window.location=b;});};Ceneje.AjaxBrowsing.fixCompareButtons=function(){$('[name="compare"][class="added"]').each(function(){$(this).mouseover(function(){$(this).text($$("Remove"));});$(this).mouseout(function(){$(this).text($$("Added"));});});};Ceneje.filtersAndStuff=function(){Ceneje.AjaxBrowsing.sortDropdown();Ceneje.AjaxBrowsing.priceRangeFilter();Ceneje.AjaxBrowsing.customRangeFilters();Ceneje.AjaxBrowsing.isqFilter();Ceneje.AjaxBrowsing.tiresWidget();Ceneje.AjaxBrowsing.fixCompareButtons();Ceneje.AjaxBrowsing.compare();};Ceneje.AjaxBrowsing.LoadMoreProducts=function(){var b=parseInt(getURLParameter("page",window.location.href));if(isNaN(b)){b=1;}var a=document.querySelector("#paginationContainer button");if(a!==null){a.addEventListener("click",function(){var c=removeURLParameter("page",window.location.href);$.ajax({type:"GET",url:c,data:{page:++b,loadAjaxProducts:true},success:function(d){var g=document.querySelector("#productGrid");var f=document.createElement("div");f.innerHTML=d.view;var e=f.querySelectorAll("#productGrid > .productBoxGrid");e.forEach(function(i,h){g.appendChild(i);});if(d.hidePagination){document.querySelector("#paginationContainer").remove();}}});if(typeof googletag!=="undefined"){Ceneje.GaTrackAndRefreshBanners();}});}};})();(function(){Ceneje.bindShowMobileDescription=function(){$(".mobileSlideBox").on("click",".slideDown",function(){if($(this).hasClass("open")){$(this).removeClass("open");$(this).parent().find(".moreContent").removeClass("open");}else{$(this).addClass("open");$(this).parent().find(".moreContent").addClass("open");}});};Ceneje.bindShowHideOnL1=function(){$("body").on("click",".hideShow",function(){if($(this).hasClass("open")){$(this).removeClass("open");$(this).closest(".categorieDescription").find(".moreContent").removeClass("open");$(this).text($$("ShowMore"));}else{$(this).addClass("open");$(this).closest(".categorieDescription").find(".moreContent").addClass("open");$(this).text($$("ShowLess"));}});};Ceneje.bindSlideDown=function(b,a){var d=b===undefined?$$("More"):b;var c=a===undefined?$$("Less"):a;$("body").on("click",".slideDown",function(){if($(this).closest(".moreContent").hasClass("open")){$(this).closest(".moreContent").removeClass("open");$(this).text(d);}else{$(this).closest(".moreContent").addClass("open");$(this).text(c);}});};Ceneje.bindSlideUpDownNavL3=function(){$("body").on("click",".searchMenu ul > li a",function(a){a.stopPropagation();});$("body").on("click",".searchMenu ul > li",function(d){var c=$(this);var a=c.hasClass("open");var b=c.find("ul");if(a){b.slideUp();}else{b.slideDown();}c.toggleClass("open",!a);});};Ceneje.bindShowHideCategory=function(){$(".categorieBlock").on("click",function(){var a=$(this);var b=$(this).data("catid");if(a.hasClass("open")){$("#openCategorieList"+b).slideUp("fast");a.removeClass("open show");}else{$(".categorieBlock").removeClass("open show");$(".categoriesList").not(":hidden").hide();$("#openCategorieList"+b).slideDown("fast");a.addClass("open show");}$("html, body").animate({scrollTop:a.offset().top-60},500);});};Ceneje.hideSidebarContentIfTooLong=function(){var c=$("#sidebar");var a=$("#mainContent").height();if(a<c.height()){var b=$("> *:not(.preventHide)",c);b.each(function(d,e){e=$(e);var f=e.position();if(f.top+e.height()>a){e.addClass("hidden");}});}};})();(function(){Ceneje.getCrazPackedString=function(c,b,a,e){if(a==c&&e==b){return"";}if(a>=e){return"";}var d="";if(!isNaN(a)||!isNaN(e)){if(isNaN(a)||a==0){d="DZ"+e;}else{if(isNaN(e)||e==0){d="OZ"+a;}else{d="BZ"+a+"Z"+e;}}}return(d.replace(",","."));};Ceneje.updateQueryStringParameter=function(c,a,d){var b=new RegExp("([?&])"+a+"=.*?(&|$)","i");var e=c.indexOf("?")!==-1?"&":"?";if(c.match(b)){return c.replace(b,"$1"+a+"="+d+"$2");}else{return c+e+a+"="+d;}};Ceneje.exposedFiltedDropdown=function(){function e(g,h){Ceneje.DebugLog("Ceneje.exposedFiltedDropdown");var l=$(h);var j=$(g);var n=".dropwdownContent";var k=".dropwdownContent.active";var i=j.find(k);i.toggleClass("hide");i.toggleClass("active");var m=l.siblings(n);if(!(i[0]===m[0])){m.toggleClass("hide");m.toggleClass("active");}}function d(l,k){var m=$(k);var i=m.closest(".dropwdownContent");var h=i.find("li.confirmContainer");if(l.keyCode===13){i.find("input[type='button']").trigger("click");}var j=parseInt(i.find(".customInput input[name='min']").val());var g=parseInt(i.find(".customInput input[name='max']").val());if(!(isNaN(j)||isNaN(g))){h.removeClass("hide");}else{h.addClass("hide");}}function c(h){var n=$(h);var s=n.data("type");var p=n.data("idatt");var v=n.closest(".dropwdownContent");var k=v.find(".customInput input[name='min']");var u=v.find(".customInput input[name='max']");var r,l,j,o=NaN;j=parseInt(k.val());o=parseInt(u.val());if(isNaN(j)||isNaN(o)){if(isNaN(j)){k.addClass("error");}if(isNaN(o)){u.addClass("error");}}else{if(s==="craz"){var t=Ceneje.getCrazPackedString(r,l,j,o);var g=Ceneje.updateQueryStringParameter(window.location.href,"craz",t);g=Ceneje.updateQueryStringParameter(g,"icpr","true");window.location.href=g;}else{if(s==="crft"){var q="";var i=Ceneje.getQueryStringParameter(window.location.href,"crft");if(i!==undefined&&i!==""){q=i.split("=")[1];var m=new RegExp(p+":[0-9]+~[0-9]+","i");if(m!==null){if(q.match(m)){q=q.replace(m,p+":"+j+"~"+o);}else{q+=","+p+":"+j+"~"+o;}}}else{q=p+":"+j+"~"+o;}window.location.href=Ceneje.updateQueryStringParameter(window.location.href,"crft",q);}}}}var f=$(".topSortBar");var b=f.find("ul#exposedFilters .dropwdownContent.price");var a=f.find("ul#exposedFilters .dropwdownContent");f.on("click","ul#exposedFilters li div.button.dropdown",function(){e("ul#exposedFilters",this);});f.on("keyup mouseup","ul#exposedFilters .dropwdownContent input[type='number']",function(g){d(g,this);});f.on("click","ul#exposedFilters .dropwdownContent li.confirmContainer input[type='button']",function(){c(this);});$(document).on("click",function(k){Ceneje.DebugLog("Auto close dropdown",k);var h=$(k.target).closest("li");if(h!==undefined&&h.length>0){var m=h.find(".dropwdownContent").length;var g=h.parents(".dropwdownContent").length;if(h.context!==undefined){if(h.context.id==="floatingFilterContainer"){$(h.context).find("#closeFilter").trigger("click");}else{if(!m&&!g){var j=$("ul#exposedFilters");var l=".dropwdownContent.active";var i=j.find(l);i.addClass("hide");i.removeClass("active");}}}}});};Ceneje.getQueryStringParameter=function(c,a){var b=new RegExp("([?&])"+a+"=.*?(&|$)","i");if(c.match(b)){return c.match(b)[0].substr(1);}};})();(function(){document.addEventListener("DOMContentLoaded",function(){Ceneje.DebugTime("search_init");Ceneje.initFilterToggle();Ceneje.bindCatalogLoadOnScroll();Ceneje.bindSlideUpDownNavL3();Ceneje.ShowFloatingProduct();Ceneje.AjaxBrowsing.LoadMoreProducts();Ceneje.setSideBarFilter();Ceneje.DebugTimeEnd("search_init");});$(window).on("load",function(){Ceneje.DebugTime("search_init_ajax");Ceneje.filtersAndStuff();Ceneje.initProductAds(true);Ceneje.bindFilterInputToSlider();Ceneje.bindSortDropdown();Ceneje.exposedFiltedDropdown();Ceneje.DebugTimeEnd("search_init_ajax");});})();